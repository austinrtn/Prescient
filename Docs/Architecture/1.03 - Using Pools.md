# Overview
Registered [[1.00 - Entity Pools|Entity Pools]] can be accessed through the main Prescient API.  The pool's API itself is intended to resemble standard ECS API conventions and function calls.  

>[!example] Example
># Pool Setup
>First make sure the pool is registered in `./src/registries/PoolRegistry.zig`
>```zig
>//PoolRegistry.zig
>pub const projectilePool = EntityPool(.{
>	.name = .projectilePool,
>	.req = .&{ .Posistion, .Velocity, .Size, .Color},
>	.components = &.{ .Lifetime, .Friction, .Mass },
>	.storage_strategy = .archetype,
});
>```
>
>You will now be able to access it through the API by calling the `getPool` method.
>```zig
>//main.zig
>pub fn main() !void {
>	// Get new instance of the Prescient engine 
>	var prescient = try Prescient.init();
>
>	//Get the desired Entity Pool by passing it's name as an argument
>	var projectile_pool = try prescient.getPool(.projectilePool);
>}
>```
>

# Creating Entities
Entities can be created by calling `EntityPool.createEntity` and takes an argument of `anytype`.   The pool's [[Entity Builder]] will throw a compile-time error if any required components are missing from the argument, or if components outside of the pool's component scope are present.  The argument itself is expected to contain a field for each component the user wants to add.  For example, if a user wants to add `Position` data when creating an entity, then the `createEntity` argument must contain a `Posistion field` followed by a value of the components data type.  Any component *within* a pool's `component` or `req` arguments can be added upon the creation of an Entity.

>[!example] 
># Arguments
>```zig
>createEntity(self: *@This(), comptime components: anytype) !EntityManager.Entity
>```
># Creating A Basic Entity
>```zig
>pool.createEntity(.{
>	// Enum of Component Name, followed by Posistion value 
>	.Posistion = ComponentRegistry.Position {
>		.x = 1, 
>		.y = 0,
>	},
>});
>```
>### Entity With Many Component 
> ```zig
> const projectile_entity = try projectilePool.createEntity(.{
> 	//Required Components
> 	.Posistion = .{ .x = 0, .y = 5 },
> 	.Velocity = .{ .dx = 3, .dy = 0 },
> 	.Size = .{ .radius = 10 }, 
> 	.Color = .{ .value = .Blue },
>
>	//Optional Components 
>	.Lifetime = .{.lifetime = 60},
>	.Friction = .{.value = 100},
>	// Optional components that the user does
>	// not want to add are left out entirely
> });
> ```


# Adding Components
You can add components to preexisting entities by using the `EntityPool.addComponent` method.   Instead of passing a struct containing fields of component names and their corresponding data, users instead pass the entity of the component, the `componentName enum` and the component data.  

>[!example]
># Arugments
>```zig
>EntityPool.addComponent(
>	self: *@This(), 
>	entity: EntityManager.Entity, 
>	comptime componentName: ComponentRegistry.ComponentName,
>	data: ComponentRegistry.getComponentByName(component),
>) !void
>```
># Usage
>```zig
>try projectile_pool.addComponent(
>	projectile_entity, 
>	.Mass, 
>	.{ .Value = 25 },
>);
>```

# Getting Component Data
Component data of entities can be retrieved by calling the `EntityPool.getComponent` method.  This method returns a pointer to the data.  
>[!example]
># Arguments
>```zig
>getComponent(
>	entity: EntityManager.Entity, 
>	comptime component: ComponentRegistry.ComponentName, 
>) !*ComponentRegistry.getComponent(component)
>```
># Usage
>```zig
>var data = try projectilePools.getComponent(projectile_entity, .Position);
>data.x = 15.5;
>```

# Destroying Entities
Entities can be destroyed simply by calling `EntityPool.destroyEntity` method.
>[!example]
># Arguments
>```zig
>EntityPool.destroyEntity(self: *@This(), entity: EntityManager.Entity) !void
>```
># Usage
>```zig
>projectile_pool.removeEntity(projectile_entity);
>```

# Removing Components 
Removing components from entities can be done using `EntityPool.removeComponent` method.  Attempting to delete required components will result in a compile-time error.

>[!example] 
># Arguments
>```zig
>EntityPool.removeComponent(
>	self: *This(), 
>	entity: EntityManager.Entity,
>	comptime component: ComponentRegistry.ComponentName,
>) void
>```
># Usage
>```zig
>projectile_pool.removeComponent(projectile_entity, component);
>```

>[!Tip] Tips
>>[!info] Trying to pass entities into function arguments of Entity Pools that the entity was not created in will result in a runtime error! 
>
>>[!info] Entities created within a pool can *not* migrate to other pools 



# See Also
- [[1.00 - Entity Pools]] - Entity Pool concepts and architecture
- [[1.01 - Creating Entity Pools]] - How to register new pools
- [[1.02 - PoolConfig]] - Pool configuration options
- [[Entity Builder]] - Compile-time entity creation validation
- [[Component Registry]] - Component types and registration
- [[Query Mapping]] - How to query entities across pools