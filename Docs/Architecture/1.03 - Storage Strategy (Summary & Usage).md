# Overview
Storage Strategy refers to how component data gets stored in [[1.00 - Entity Pools|Entity Pools]].   By allowing developers to choose how want to store their data allows Prescient to maintain peak performance in complex game and simulation scenarios and enables the widest range of possible entity types.  For example, Bevy recommends using other libraries for particle systems because the short lifespan of particles require sparse-set storage, and Bevy uses archetype storage exclusively.  
# Sparse-Set Storage: 
Sparse-Set storage does well when systems need to frequently create/destroy entities, and add/remove components.  This storage strategy can be thought of as the more flexible option, and does not do well when systems need to constantly iterate over entities due to the sparse-set method of storing data being cache-unfriendly.  Examples of entity types that benefit from this storage strategy are:
- Inventory items
- Particles
- Status Effects
- UI Elements
# Archetype Storage
Archetype storage has the exact opposite trade-offs as sparse-set.  This storage strategy does well at frequently iterating many entities due to its cache-friendly nature.  The downside of archetype storage is that creating/destroying entities and adding/removing components are much more expensive operations.   Examples of entity types that benefit from this storage strategy are:
- NPCs 
- Enemies 
- Projectiles 
- World Objects / Props

>[!tip] Test Storage Stategies
>It may not be obvious which storage strategy to use.  Use the profiler to asses bottlenecks and test which storage strategy work best for each entity pool.  Thanks to Zig's comp-time, the only action required changing storage strategies is to change the `storage_strategy` of a pool's PoolConfig and to recompile!

# How To Use
You can select which storage strategy you want to use when defining entity pools within the [[1.05 - Pool Registry|Pool Registry]] within the [[1.02 - PoolConfig|PoolConfig]] struct.  Pass a `StorageStrategy.StorageStrategy` enum in the `storage_strategy` argument of PoolConfig.  Values of `StorageStrategy` are Sparse and Archetype. 

```zig
pub const enemyPool = EntityPool(.{
	.name = .PlayerPool,
	.storage_strategy = .Archetype,
	.components = &.{
		.Attack,
		.Mana,
		.Status
	},
	.req = &.{
		.Posistion,
		.Velocity,
		.Health
	},
});
``` 

# See Also
